{% extends 'base.html' %}

{% block main_content %}
    <h2>Текущие курсы валют</h2>
    <h4>Последнее обновление: {{ last_rate_date|date:'Y-m-d H:i' }}</h4>
    <div>
        {% for currency_types in currency_types_list %}
            <div>
               <table>
                <caption>
                    <strong>1 {{ currency_types.currency_type }} ({{ currency_types.base_currency_type }})</strong>
                </caption>
                  <tr>
                      <th>source</th>
                      <th>sale</th>
                      <th>buy</th>
                      <th>created</th>
                  </tr>
                  {% for rate in last_rate_list %}
                      {% if rate.currency_type == currency_types.currency_type and rate.base_currency_type == currency_types.base_currency_type%}
                        <tr>
                            <td style="text-align: center;">{{ rate.source.name }}</td>
                            <td style="text-align: right;">{{ rate.sale }}</td>
                            <td style="text-align: right;">{{ rate.buy }}</td>
                            <td style="text-align: center;">{{ rate.created|date:'Y-m-d H:i' }}</td>
                        </tr>
                      {% endif %}
                  {% endfor %}
                </table>
            </div><br>
        {% endfor %}
    </div>
 {% endblock main_content %}